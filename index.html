<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical Pipes and Fittings Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
        }
        .calculator {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin: 10px 0 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }
        button:hover {
            background-color: #2980b9;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: none;
        }
        .error {
            color: red;
            font-size: 14px;
            margin-top: -10px;
            margin-bottom: 10px;
            display: none;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            .calculator {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <h1>Electrical Pipes and Fittings Calculator</h1>
    <div class="calculator">
        <form id="calcForm">
            <label for="conduitType">Conduit Type:</label>
            <select id="conduitType" required>
                <option value="PVC">PVC</option>
                <option value="EMT">EMT</option>
            </select>

            <label for="pipeLength">Total Pipe Length (feet):</label>
            <input type="number" id="pipeLength" min="0" step="0.1" required>

            <label for="couplings">Number of Couplings:</label>
            <input type="number" id="couplings" min="0" step="1" required>

            <label for="elbows">Number of 90-Degree Elbows:</label>
            <input type="number" id="elbows" min="0" step="1" required>

            <label for="connectors">Number of Connectors:</label>
            <input type="number" id="connectors" min="0" step="1" required>

            <label for="laborRate">Labor Rate ($/hour, default 45):</label>
            <input type="number" id="laborRate" min="0" step="0.01" placeholder="45">

            <div id="error" class="error"></div>
            <button type="submit">Calculate</button>
        </form>
        <div id="result"></div>
    </div>

    <script>
        // Material price database (USD, 2025 averages)
        const materials = {
            PVC: {
                pipe_cost_per_foot: 2.50,
                coupling: 1.20,
                elbow_90: 2.50,
                connector: 1.80
            },
            EMT: {
                pipe_cost_per_foot: 3.75,
                coupling: 1.50,
                elbow_90: 3.20,
                connector: 2.10
            }
        };

        // Labor constants
        const laborHoursPer100ft = 2.5;
        const laborHoursPerFitting = 0.1;
        const defaultLaborRate = 45.00;

        document.getElementById('calcForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const errorDiv = document.getElementById('error');
            const resultDiv = document.getElementById('result');

            // Get input values
            const conduitType = document.getElementById('conduitType').value;
            const pipeLength = parseFloat(document.getElementById('pipeLength').value);
            const couplings = parseInt(document.getElementById('couplings').value);
            const elbows = parseInt(document.getElementById('elbows').value);
            const connectors = parseInt(document.getElementById('connectors').value);
            const laborRate = parseFloat(document.getElementById('laborRate').value) || defaultLaborRate;

            // Input validation
            if (isNaN(pipeLength) || pipeLength < 0 ||
                isNaN(couplings) || couplings < 0 ||
                isNaN(elbows) || elbows < 0 ||
                isNaN(connectors) || connectors < 0 ||
                isNaN(laborRate) || laborRate < 0) {
                errorDiv.style.display = 'block';
                errorDiv.textContent = 'Please enter valid non-negative numbers for all fields.';
                resultDiv.style.display = 'none';
                return;
            }

            errorDiv.style.display = 'none';

            // Material cost calculations
            const pipeCost = pipeLength * materials[conduitType].pipe_cost_per_foot;
            const couplingCost = couplings * materials[conduitType].coupling;
            const elbowCost = elbows * materials[conduitType].elbow_90;
            const connectorCost = connectors * materials[conduitType].connector;
            const totalMaterialCost = pipeCost + couplingCost + elbowCost + connectorCost;

            // Labor cost calculations
            const totalFittings = couplings + elbows + connectors;
            const laborHours = (pipeLength / 100) * laborHoursPer100ft + totalFittings * laborHoursPerFitting;
            const totalLaborCost = laborHours * laborRate;

            // Total cost
            const totalCost = totalMaterialCost + totalLaborCost;

            // Display results
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h3>Cost Estimation Summary</h3>
                <p><strong>Conduit Type:</strong> ${conduitType}</p>
                <p><strong>Total Pipe Length:</strong> ${pipeLength.toFixed(2)} feet</p>
                <p><strong>Total Fittings:</strong> ${totalFittings} (Couplings: ${couplings}, Elbows: ${elbows}, Connectors: ${connectors})</p>
                <h4>Material Costs:</h4>
                <p>Pipe: $${pipeCost.toFixed(2)}</p>
                <p>Couplings: $${couplingCost.toFixed(2)}</p>
                <p>90-Degree Elbows: $${elbowCost.toFixed(2)}</p>
                <p>Connectors: $${connectorCost.toFixed(2)}</p>
                <p><strong>Total Material Cost:</strong> $${totalMaterialCost.toFixed(2)}</p>
                <h4>Labor Costs:</h4>
                <p>Labor Hours: ${laborHours.toFixed(2)} hours</p>
                <p>Labor Cost (@ $${laborRate.toFixed(2)}/hour): $${totalLaborCost.toFixed(2)}</p>
                <p><strong>Total Estimated Cost:</strong> $${totalCost.toFixed(2)}</p>
            `;
        });
    </script>
</body>
</html>
